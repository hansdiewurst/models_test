function t(t){return t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},r=[],n=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i=!1;function s(){i=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)r[e]=t[e],n[t.charCodeAt(e)]=e;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63}function a(t,e,n){for(var o,i,s=[],a=e;a<n;a+=3)o=(t[a]<<16)+(t[a+1]<<8)+t[a+2],s.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}function u(t){var e;i||s();for(var n=t.length,o=n%3,u="",p=[],f=16383,c=0,h=n-o;c<h;c+=f)p.push(a(t,c,c+f>h?h:c+f));return 1===o?(e=t[n-1],u+=r[e>>2],u+=r[e<<4&63],u+="=="):2===o&&(e=(t[n-2]<<8)+t[n-1],u+=r[e>>10],u+=r[e>>4&63],u+=r[e<<2&63],u+="="),p.push(u),p.join("")}function p(t,e,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,p=u>>1,f=-7,c=r?o-1:0,h=r?-1:1,l=t[e+c];for(c+=h,i=l&(1<<-f)-1,l>>=-f,f+=a;f>0;i=256*i+t[e+c],c+=h,f-=8);for(s=i&(1<<-f)-1,i>>=-f,f+=n;f>0;s=256*s+t[e+c],c+=h,f-=8);if(0===i)i=1-p;else{if(i===u)return s?NaN:1/0*(l?-1:1);s+=Math.pow(2,n),i-=p}return(l?-1:1)*s*Math.pow(2,i-n)}function f(t,e,r,n,o,i){var s,a,u,p=8*i-o-1,f=(1<<p)-1,c=f>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:i-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+c>=1?h/u:h*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=f?(a=0,s=f):s+c>=1?(a=(e*u-1)*Math.pow(2,o),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,o),s=0));o>=8;t[r+l]=255&a,l+=y,a/=256,o-=8);for(s=s<<o|a,p+=o;p>0;t[r+l]=255&s,l+=y,s/=256,p-=8);t[r+l-y]|=128*d}var c={}.toString,h=Array.isArray||function(t){return"[object Array]"==c.call(t)};g.TYPED_ARRAY_SUPPORT=void 0===e.TYPED_ARRAY_SUPPORT||e.TYPED_ARRAY_SUPPORT;var l=y();function y(){return g.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function d(t,e){if(y()<e)throw new RangeError("Invalid typed array length");return g.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=g.prototype:(null===t&&(t=new g(e)),t.length=e),t}function g(t,e,r){if(!(g.TYPED_ARRAY_SUPPORT||this instanceof g))return new g(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return _(this,t)}return m(this,t,e,r)}function m(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);g.TYPED_ARRAY_SUPPORT?(t=e).__proto__=g.prototype:t=w(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!g.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|k(e,r);t=d(t,n);var o=t.write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(E(e)){var r=0|b(e.length);return 0===(t=d(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?d(t,0):w(t,e);if("Buffer"===e.type&&h(e.data))return w(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function v(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function _(t,e){if(v(e),t=d(t,e<0?0:0|b(e)),!g.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function w(t,e){var r=e.length<0?0:0|b(e.length);t=d(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function b(t){if(t>=y())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y().toString(16)+" bytes");return 0|t}function T(t){return+t!=t&&(t=0),g.alloc(+t)}function E(t){return!(null==t||!t._isBuffer)}function k(t,e){if(E(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return X(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Q(t).length;default:if(n)return X(t).length;e=(""+e).toLowerCase(),n=!0}}function A(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,r);case"utf8":case"utf-8":return C(this,e,r);case"ascii":return U(this,e,r);case"latin1":case"binary":return z(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function S(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function O(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=g.from(e,n)),E(e))return 0===e.length?-1:B(t,e,r,n,o);if("number"==typeof e)return e&=255,g.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):B(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function B(t,e,r,n,o){var i,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function p(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var f=-1;for(i=r;i<a;i++)if(p(t,i)===p(e,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===u)return f*s}else-1!==f&&(i-=i-f),f=-1}else for(r+u>a&&(r=a-u),i=r;i>=0;i--){for(var c=!0,h=0;h<u;h++)if(p(t,i+h)!==p(e,h)){c=!1;break}if(c)return i}return-1}function j(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function x(t,e,r,n){return K(X(e,t.length-r),t,r,n)}function N(t,e,r,n){return K(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function R(t,e,r,n){return N(t,e,r,n)}function I(t,e,r,n){return K(Q(e),t,r,n)}function L(t,e,r,n){return K(function(t,e){for(var r,n,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?u(t):u(t.slice(e,r))}function C(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,s,a,u,p=t[o],f=null,c=p>239?4:p>223?3:p>191?2:1;if(o+c<=r)switch(c){case 1:p<128&&(f=p);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&p)<<6|63&i)>127&&(f=u);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&(u=(15&p)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&p)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(f=u)}null===f?(f=65533,c=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),o+=c}return function(t){var e=t.length;if(e<=F)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=F));return r}(n)}g.poolSize=8192,g._augment=function(t){return t.__proto__=g.prototype,t},g.from=function(t,e,r){return m(null,t,e,r)},g.TYPED_ARRAY_SUPPORT&&(g.prototype.__proto__=Uint8Array.prototype,g.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&g[Symbol.species]),g.alloc=function(t,e,r){return function(t,e,r,n){return v(e),e<=0?d(t,e):void 0!==r?"string"==typeof n?d(t,e).fill(r,n):d(t,e).fill(r):d(t,e)}(null,t,e,r)},g.allocUnsafe=function(t){return _(null,t)},g.allocUnsafeSlow=function(t){return _(null,t)},g.isBuffer=tt,g.compare=function(t,e){if(!E(t)||!E(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},g.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},g.concat=function(t,e){if(!h(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return g.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=g.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var i=t[r];if(!E(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},g.byteLength=k,g.prototype._isBuffer=!0,g.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)S(this,e,e+1);return this},g.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)S(this,e,e+3),S(this,e+1,e+2);return this},g.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)S(this,e,e+7),S(this,e+1,e+6),S(this,e+2,e+5),S(this,e+3,e+4);return this},g.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):A.apply(this,arguments)},g.prototype.equals=function(t){if(!E(t))throw new TypeError("Argument must be a Buffer");return this===t||0===g.compare(this,t)},g.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},g.prototype.compare=function(t,e,r,n,o){if(!E(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(i,s),u=this.slice(n,o),p=t.slice(e,r),f=0;f<a;++f)if(u[f]!==p[f]){i=u[f],s=p[f];break}return i<s?-1:s<i?1:0},g.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},g.prototype.indexOf=function(t,e,r){return O(this,t,e,r,!0)},g.prototype.lastIndexOf=function(t,e,r){return O(this,t,e,r,!1)},g.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return j(this,t,e,r);case"utf8":case"utf-8":return x(this,t,e,r);case"ascii":return N(this,t,e,r);case"latin1":case"binary":return R(this,t,e,r);case"base64":return I(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},g.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var F=4096;function U(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function z(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function D(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=G(t[i]);return o}function V(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function M(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function Y(t,e,r,n,o,i){if(!E(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function J(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function H(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function q(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function $(t,e,r,n,o){return o||q(t,0,r,4),f(t,e,r,n,23,4),r+4}function W(t,e,r,n,o){return o||q(t,0,r,8),f(t,e,r,n,52,8),r+8}g.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),g.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=g.prototype;else{var o=e-t;r=new g(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},g.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},g.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},g.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},g.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},g.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},g.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},g.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},g.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},g.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||M(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},g.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},g.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},g.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},g.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},g.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},g.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),p(this,t,!0,23,4)},g.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),p(this,t,!1,23,4)},g.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),p(this,t,!0,52,8)},g.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),p(this,t,!1,52,8)},g.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||Y(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},g.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||Y(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},g.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||Y(this,t,e,1,255,0),g.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},g.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||Y(this,t,e,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):J(this,t,e,!0),e+2},g.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||Y(this,t,e,2,65535,0),g.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):J(this,t,e,!1),e+2},g.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||Y(this,t,e,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):H(this,t,e,!0),e+4},g.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||Y(this,t,e,4,4294967295,0),g.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},g.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);Y(this,t,e,r,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},g.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);Y(this,t,e,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},g.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||Y(this,t,e,1,127,-128),g.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},g.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||Y(this,t,e,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):J(this,t,e,!0),e+2},g.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||Y(this,t,e,2,32767,-32768),g.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):J(this,t,e,!1),e+2},g.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||Y(this,t,e,4,2147483647,-2147483648),g.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):H(this,t,e,!0),e+4},g.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||Y(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),g.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},g.prototype.writeFloatLE=function(t,e,r){return $(this,t,e,!0,r)},g.prototype.writeFloatBE=function(t,e,r){return $(this,t,e,!1,r)},g.prototype.writeDoubleLE=function(t,e,r){return W(this,t,e,!0,r)},g.prototype.writeDoubleBE=function(t,e,r){return W(this,t,e,!1,r)},g.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!g.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},g.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!g.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var s=E(t)?t:X(new g(t,n).toString()),a=s.length;for(i=0;i<r-e;++i)this[i+e]=s[i%a]}return this};var Z=/[^+\/0-9A-Za-z-_]/g;function G(t){return t<16?"0"+t.toString(16):t.toString(16)}function X(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function Q(t){return function(t){var e,r,a,u,p,f;i||s();var c=t.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");p="="===t[c-2]?2:"="===t[c-1]?1:0,f=new o(3*c/4-p),a=p>0?c-4:c;var h=0;for(e=0,r=0;e<a;e+=4,r+=3)u=n[t.charCodeAt(e)]<<18|n[t.charCodeAt(e+1)]<<12|n[t.charCodeAt(e+2)]<<6|n[t.charCodeAt(e+3)],f[h++]=u>>16&255,f[h++]=u>>8&255,f[h++]=255&u;return 2===p?(u=n[t.charCodeAt(e)]<<2|n[t.charCodeAt(e+1)]>>4,f[h++]=255&u):1===p&&(u=n[t.charCodeAt(e)]<<10|n[t.charCodeAt(e+1)]<<4|n[t.charCodeAt(e+2)]>>2,f[h++]=u>>8&255,f[h++]=255&u),f}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Z,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function tt(t){return null!=t&&(!!t._isBuffer||et(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&et(t.slice(0,0))}(t))}function et(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var rt={Buffer:g,INSPECT_MAX_BYTES:50,SlowBuffer:T,isBuffer:tt,kMaxLength:y},nt=t(Object.freeze({__proto__:null,Buffer:g,INSPECT_MAX_BYTES:50,SlowBuffer:T,isBuffer:tt,kMaxLength:l,default:rt})),ot=nt.Buffer;function it(){this.data=void 0}function st(t,e){var r=t[0],n=t[1],o=t[2],i=t[3];r=ut(r,n,o,i,e[0],7,-680876936),i=ut(i,r,n,o,e[1],12,-389564586),o=ut(o,i,r,n,e[2],17,606105819),n=ut(n,o,i,r,e[3],22,-1044525330),r=ut(r,n,o,i,e[4],7,-176418897),i=ut(i,r,n,o,e[5],12,1200080426),o=ut(o,i,r,n,e[6],17,-1473231341),n=ut(n,o,i,r,e[7],22,-45705983),r=ut(r,n,o,i,e[8],7,1770035416),i=ut(i,r,n,o,e[9],12,-1958414417),o=ut(o,i,r,n,e[10],17,-42063),n=ut(n,o,i,r,e[11],22,-1990404162),r=ut(r,n,o,i,e[12],7,1804603682),i=ut(i,r,n,o,e[13],12,-40341101),o=ut(o,i,r,n,e[14],17,-1502002290),r=pt(r,n=ut(n,o,i,r,e[15],22,1236535329),o,i,e[1],5,-165796510),i=pt(i,r,n,o,e[6],9,-1069501632),o=pt(o,i,r,n,e[11],14,643717713),n=pt(n,o,i,r,e[0],20,-373897302),r=pt(r,n,o,i,e[5],5,-701558691),i=pt(i,r,n,o,e[10],9,38016083),o=pt(o,i,r,n,e[15],14,-660478335),n=pt(n,o,i,r,e[4],20,-405537848),r=pt(r,n,o,i,e[9],5,568446438),i=pt(i,r,n,o,e[14],9,-1019803690),o=pt(o,i,r,n,e[3],14,-187363961),n=pt(n,o,i,r,e[8],20,1163531501),r=pt(r,n,o,i,e[13],5,-1444681467),i=pt(i,r,n,o,e[2],9,-51403784),o=pt(o,i,r,n,e[7],14,1735328473),r=ft(r,n=pt(n,o,i,r,e[12],20,-1926607734),o,i,e[5],4,-378558),i=ft(i,r,n,o,e[8],11,-2022574463),o=ft(o,i,r,n,e[11],16,1839030562),n=ft(n,o,i,r,e[14],23,-35309556),r=ft(r,n,o,i,e[1],4,-1530992060),i=ft(i,r,n,o,e[4],11,1272893353),o=ft(o,i,r,n,e[7],16,-155497632),n=ft(n,o,i,r,e[10],23,-1094730640),r=ft(r,n,o,i,e[13],4,681279174),i=ft(i,r,n,o,e[0],11,-358537222),o=ft(o,i,r,n,e[3],16,-722521979),n=ft(n,o,i,r,e[6],23,76029189),r=ft(r,n,o,i,e[9],4,-640364487),i=ft(i,r,n,o,e[12],11,-421815835),o=ft(o,i,r,n,e[15],16,530742520),r=ct(r,n=ft(n,o,i,r,e[2],23,-995338651),o,i,e[0],6,-198630844),i=ct(i,r,n,o,e[7],10,1126891415),o=ct(o,i,r,n,e[14],15,-1416354905),n=ct(n,o,i,r,e[5],21,-57434055),r=ct(r,n,o,i,e[12],6,1700485571),i=ct(i,r,n,o,e[3],10,-1894986606),o=ct(o,i,r,n,e[10],15,-1051523),n=ct(n,o,i,r,e[1],21,-2054922799),r=ct(r,n,o,i,e[8],6,1873313359),i=ct(i,r,n,o,e[15],10,-30611744),o=ct(o,i,r,n,e[6],15,-1560198380),n=ct(n,o,i,r,e[13],21,1309151649),r=ct(r,n,o,i,e[4],6,-145523070),i=ct(i,r,n,o,e[11],10,-1120210379),o=ct(o,i,r,n,e[2],15,718787259),n=ct(n,o,i,r,e[9],21,-343485551),t[0]=lt(r,t[0]),t[1]=lt(n,t[1]),t[2]=lt(o,t[2]),t[3]=lt(i,t[3])}function at(t,e,r,n,o,i){return e=lt(lt(e,t),lt(n,i)),lt(e<<o|e>>>32-o,r)}function ut(t,e,r,n,o,i,s){return at(e&r|~e&n,t,e,o,i,s)}function pt(t,e,r,n,o,i,s){return at(e&n|r&~n,t,e,o,i,s)}function ft(t,e,r,n,o,i,s){return at(e^r^n,t,e,o,i,s)}function ct(t,e,r,n,o,i,s){return at(r^(e|~n),t,e,o,i,s)}function ht(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}function lt(t,e){return t+e&4294967295}it.prototype.end=function(t){this.data=t},it.prototype.read=function(){return function(t){var e,r=function(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)st(n,ht(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(st(n,o),e=0;e<16;e++)o[e]=0;return o[14]=8*r,st(n,o),n}(t),n=ot.alloc?ot.alloc(16):new ot(16);for(e=0;e<4;e++)n.writeIntLE(r[e],4*e,4);return n}(this.data)};var yt={createHash:function(t){if("md5"!==t)throw new Error("only md5 is supported in the browser");return new it}};function dt(){throw new Error("setTimeout has not been defined")}function gt(){throw new Error("clearTimeout has not been defined")}var mt=dt,vt=gt;function _t(t){if(mt===setTimeout)return setTimeout(t,0);if((mt===dt||!mt)&&setTimeout)return mt=setTimeout,setTimeout(t,0);try{return mt(t,0)}catch(e){try{return mt.call(null,t,0)}catch(e){return mt.call(this,t,0)}}}"function"==typeof e.setTimeout&&(mt=setTimeout),"function"==typeof e.clearTimeout&&(vt=clearTimeout);var wt,bt=[],Tt=!1,Et=-1;function kt(){Tt&&wt&&(Tt=!1,wt.length?bt=wt.concat(bt):Et=-1,bt.length&&At())}function At(){if(!Tt){var t=_t(kt);Tt=!0;for(var e=bt.length;e;){for(wt=bt,bt=[];++Et<e;)wt&&wt[Et].run();Et=-1,e=bt.length}wt=null,Tt=!1,function(t){if(vt===clearTimeout)return clearTimeout(t);if((vt===gt||!vt)&&clearTimeout)return vt=clearTimeout,clearTimeout(t);try{return vt(t)}catch(e){try{return vt.call(null,t)}catch(e){return vt.call(this,t)}}}(t)}}function St(t,e){this.fun=t,this.array=e}St.prototype.run=function(){this.fun.apply(null,this.array)};function Ot(){}var Bt=Ot,jt=Ot,xt=Ot,Nt=Ot,Rt=Ot,It=Ot,Lt=Ot;var Pt=e.performance||{},Ct=Pt.now||Pt.mozNow||Pt.msNow||Pt.oNow||Pt.webkitNow||function(){return(new Date).getTime()};var Ft=new Date;var Ut={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];bt.push(new St(t,e)),1!==bt.length||Tt||_t(At)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Bt,addListener:jt,once:xt,off:Nt,removeListener:Rt,removeAllListeners:It,emit:Lt,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*Ct.call(Pt),r=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(r-=t[0],(n-=t[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Ft)/1e3}},zt="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t},Dt=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},Vt=/%[sdj%]/g;function Mt(t){if(!oe(t)){for(var e=[],r=0;r<arguments.length;r++)e.push($t(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,i=String(t).replace(Vt,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),s=n[r];r<o;s=n[++r])ee(s)||!ue(s)?i+=" "+s:i+=" "+$t(s);return i}function Yt(t,r){if(se(e.process))return function(){return Yt(t,r).apply(this,arguments)};if(!0===Ut.noDeprecation)return t;var n=!1;return function(){if(!n){if(Ut.throwDeprecation)throw new Error(r);Ut.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}}var Jt,Ht={};function qt(t){if(se(Jt)&&(Jt=Ut.env.NODE_DEBUG||""),t=t.toUpperCase(),!Ht[t])if(new RegExp("\\b"+t+"\\b","i").test(Jt)){Ht[t]=function(){var e=Mt.apply(null,arguments);console.error("%s %d: %s",t,0,e)}}else Ht[t]=function(){};return Ht[t]}function $t(t,e){var r={seen:[],stylize:Zt};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),te(e)?r.showHidden=e:e&&ve(r,e),se(r.showHidden)&&(r.showHidden=!1),se(r.depth)&&(r.depth=2),se(r.colors)&&(r.colors=!1),se(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Wt),Gt(r,t,r.depth)}function Wt(t,e){var r=$t.styles[e];return r?"�["+$t.colors[r][0]+"m"+t+"�["+$t.colors[r][1]+"m":t}function Zt(t,e){return t}function Gt(t,e,r){if(t.customInspect&&e&&ce(e.inspect)&&e.inspect!==$t&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(r,t);return oe(n)||(n=Gt(t,n,r)),n}var o=function(t,e){if(se(e))return t.stylize("undefined","undefined");if(oe(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(ne(e))return t.stylize(""+e,"number");if(te(e))return t.stylize(""+e,"boolean");if(ee(e))return t.stylize("null","null")}(t,e);if(o)return o;var i=Object.keys(e),s=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(i);if(t.showHidden&&(i=Object.getOwnPropertyNames(e)),fe(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return Xt(e);if(0===i.length){if(ce(e)){var a=e.name?": "+e.name:"";return t.stylize("[Function"+a+"]","special")}if(ae(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(pe(e))return t.stylize(Date.prototype.toString.call(e),"date");if(fe(e))return Xt(e)}var u,p="",f=!1,c=["{","}"];(Kt(e)&&(f=!0,c=["[","]"]),ce(e))&&(p=" [Function"+(e.name?": "+e.name:"")+"]");return ae(e)&&(p=" "+RegExp.prototype.toString.call(e)),pe(e)&&(p=" "+Date.prototype.toUTCString.call(e)),fe(e)&&(p=" "+Xt(e)),0!==i.length||f&&0!=e.length?r<0?ae(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),u=f?function(t,e,r,n,o){for(var i=[],s=0,a=e.length;s<a;++s)_e(e,String(s))?i.push(Qt(t,e,r,n,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(Qt(t,e,r,n,o,!0))})),i}(t,e,r,s,i):i.map((function(n){return Qt(t,e,r,s,n,f)})),t.seen.pop(),function(t,e,r){var n=t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(n>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(u,p,c)):c[0]+p+c[1]}function Xt(t){return"["+Error.prototype.toString.call(t)+"]"}function Qt(t,e,r,n,o,i){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),_e(n,o)||(s="["+o+"]"),a||(t.seen.indexOf(u.value)<0?(a=ee(r)?Gt(t,u.value,null):Gt(t,u.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),se(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function Kt(t){return Array.isArray(t)}function te(t){return"boolean"==typeof t}function ee(t){return null===t}function re(t){return null==t}function ne(t){return"number"==typeof t}function oe(t){return"string"==typeof t}function ie(t){return"symbol"==typeof t}function se(t){return void 0===t}function ae(t){return ue(t)&&"[object RegExp]"===ye(t)}function ue(t){return"object"==typeof t&&null!==t}function pe(t){return ue(t)&&"[object Date]"===ye(t)}function fe(t){return ue(t)&&("[object Error]"===ye(t)||t instanceof Error)}function ce(t){return"function"==typeof t}function he(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function le(t){return g.isBuffer(t)}function ye(t){return Object.prototype.toString.call(t)}function de(t){return t<10?"0"+t.toString(10):t.toString(10)}$t.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},$t.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var ge=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function me(){var t,e;console.log("%s - %s",(t=new Date,e=[de(t.getHours()),de(t.getMinutes()),de(t.getSeconds())].join(":"),[t.getDate(),ge[t.getMonth()],e].join(" ")),Mt.apply(null,arguments))}function ve(t,e){if(!e||!ue(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}function _e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var we="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function be(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(we&&t[we]){var e;if("function"!=typeof(e=t[we]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,we,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,o)}catch(t){r(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),we&&Object.defineProperty(e,we,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,Dt(t))}function Te(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}function Ee(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);var n=e.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return n.apply(o,arguments)};t.apply(this,e).then((function(t){Ut.nextTick(i.bind(null,null,t))}),(function(t){Ut.nextTick(Te.bind(null,t,i))}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,Dt(t)),e}be.custom=we;var ke={inherits:zt,_extend:ve,log:me,isBuffer:le,isPrimitive:he,isFunction:ce,isError:fe,isDate:pe,isObject:ue,isRegExp:ae,isUndefined:se,isSymbol:ie,isString:oe,isNumber:ne,isNullOrUndefined:re,isNull:ee,isBoolean:te,isArray:Kt,inspect:$t,deprecate:Yt,format:Mt,debuglog:qt,promisify:be,callbackify:Ee},Ae=t(Object.freeze({__proto__:null,format:Mt,deprecate:Yt,debuglog:qt,inspect:$t,isArray:Kt,isBoolean:te,isNull:ee,isNullOrUndefined:re,isNumber:ne,isString:oe,isSymbol:ie,isUndefined:se,isRegExp:ae,isObject:ue,isDate:pe,isError:fe,isFunction:ce,isPrimitive:he,isBuffer:le,log:me,inherits:zt,_extend:ve,promisify:be,callbackify:Ee,default:ke})),Se=yt,Oe=Ae,Be=nt.Buffer,je=new Ce(4096),xe=/^[A-Za-z_][A-Za-z0-9_]*$/,Ne=Oe.format;function Re(t){return"function"==typeof Be.alloc?Be.alloc(t):new Be(t)}function Ie(t,e){return"function"==typeof Be.from?Be.from(t,e):new Be(t,e)}function Le(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Pe(t){return xe.test(t)}function Ce(t){this._len=0|t,this._pos=0,this._slab=Re(this._len)}function Fe(t){var e=Math.pow(2,31),r=Math.floor(t||Math.random()*(e-1));this._max=e,this._nextInt=function(){return r=(1103515245*r+12345)%e}}function Ue(){this._index=0,this._items=[]}function ze(t,e){if(this.buf=t,this.pos=0|e,this.pos<0)throw new Error("negative offset")}function De(t,e){for(;e--;)t[e]=~t[e]}Ce.prototype.alloc=function(t){if(t<0)throw new Error("negative length");var e=this._len;return t>e?Re(t):(this._pos+t>e&&(this._slab=Re(e),this._pos=0),this._slab.slice(this._pos,this._pos+=t))},Fe.prototype.nextBoolean=function(){return!!(this._nextInt()%2)},Fe.prototype.nextInt=function(t,e){return void 0===e&&(e=t,t=0),e=void 0===e?this._max:e,t+Math.floor(this.nextFloat()*(e-t))},Fe.prototype.nextFloat=function(t,e){return void 0===e&&(e=t,t=0),t+((e=void 0===e?1:e)-t)*this._nextInt()/this._max},Fe.prototype.nextString=function(t,e){t|=0;var r="";(e=e||"aA").indexOf("a")>-1&&(r+="abcdefghijklmnopqrstuvwxyz"),e.indexOf("A")>-1&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.indexOf("#")>-1&&(r+="0123456789"),e.indexOf("!")>-1&&(r+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var n=[],o=0;o<t;o++)n.push(this.choice(r));return n.join("")},Fe.prototype.nextBuffer=function(t){var e,r=[];for(e=0;e<t;e++)r.push(this.nextInt(256));return Ie(r)},Fe.prototype.choice=function(t){var e=t.length;if(!e)throw new Error("choosing from empty array");return t[this.nextInt(e)]},Ue.prototype.push=function(t){var e,r=this._items,n=0|r.length;for(r.push(t);n>0&&r[n].index<r[e=n-1>>1].index;)t=r[n],r[n]=r[e],r[e]=t,n=e},Ue.prototype.pop=function(){var t=this._items,e=t.length-1|0,r=t[0];if(!r||r.index>this._index)return null;if(this._index++,!e)return t.pop(),r;t[0]=t.pop();for(var n,o,i,s,a,u,p,f=e>>1,c=0;c<f&&(s=t[c],o=c+1<<1,u=t[n=1+(c<<1)],!(p=t[o])||u.index<=p.index?(a=u,i=n):(a=p,i=o),!(a.index>=s.index));)t[i]=s,t[c]=a,c=i;return r},ze.prototype.isValid=function(){return this.pos<=this.buf.length},ze.prototype._invalidate=function(){this.pos=this.buf.length+1},ze.prototype.readBoolean=function(){return!!this.buf[this.pos++]},ze.prototype.skipBoolean=function(){this.pos++},ze.prototype.writeBoolean=function(t){this.buf[this.pos++]=!!t},ze.prototype.readInt=ze.prototype.readLong=function(){var t,e,r,n,o=0,i=0,s=this.buf;do{e=128&(t=s[this.pos++]),o|=(127&t)<<i,i+=7}while(e&&i<28);if(e){r=o,n=268435456;do{r+=(127&(t=s[this.pos++]))*n,n*=128}while(128&t);return(r%2?-(r+1):r)/2}return o>>1^-(1&o)},ze.prototype.skipInt=ze.prototype.skipLong=function(){for(var t=this.buf;128&t[this.pos++];);},ze.prototype.writeInt=ze.prototype.writeLong=function(t){var e,r,n=this.buf;if(t>=-1073741824&&t<1073741824){r=t>=0?t<<1:~t<<1|1;do{n[this.pos]=127&r,r>>=7}while(r&&(n[this.pos++]|=128))}else{e=t>=0?2*t:2*-t-1;do{n[this.pos]=127&e,e/=128}while(e>=1&&(n[this.pos++]|=128))}this.pos++},ze.prototype.readFloat=function(){var t=this.buf,e=this.pos;return this.pos+=4,this.pos>t.length?0:this.buf.readFloatLE(e)},ze.prototype.skipFloat=function(){this.pos+=4},ze.prototype.writeFloat=function(t){var e=this.buf,r=this.pos;if(this.pos+=4,!(this.pos>e.length))return this.buf.writeFloatLE(t,r)},ze.prototype.readDouble=function(){var t=this.buf,e=this.pos;return this.pos+=8,this.pos>t.length?0:this.buf.readDoubleLE(e)},ze.prototype.skipDouble=function(){this.pos+=8},ze.prototype.writeDouble=function(t){var e=this.buf,r=this.pos;if(this.pos+=8,!(this.pos>e.length))return this.buf.writeDoubleLE(t,r)},ze.prototype.readFixed=function(t){var e=this.pos;if(this.pos+=t,!(this.pos>this.buf.length)){var r=je.alloc(t);return this.buf.copy(r,0,e,e+t),r}},ze.prototype.skipFixed=function(t){this.pos+=t},ze.prototype.writeFixed=function(t,e){e=e||t.length;var r=this.pos;this.pos+=e,this.pos>this.buf.length||t.copy(this.buf,r,0,e)},ze.prototype.readBytes=function(){var t=this.readLong();if(!(t<0))return this.readFixed(t);this._invalidate()},ze.prototype.skipBytes=function(){var t=this.readLong();t<0?this._invalidate():this.pos+=t},ze.prototype.writeBytes=function(t){var e=t.length;this.writeLong(e),this.writeFixed(t,e)},"function"==typeof Be.prototype.utf8Slice?ze.prototype.readString=function(){var t=this.readLong();if(t<0)return this._invalidate(),"";var e=this.pos,r=this.buf;return this.pos+=t,this.pos>r.length?void 0:this.buf.utf8Slice(e,e+t)}:ze.prototype.readString=function(){var t=this.readLong();if(t<0)return this._invalidate(),"";var e=this.pos,r=this.buf;return this.pos+=t,this.pos>r.length?void 0:this.buf.slice(e,e+t).toString()},ze.prototype.skipString=function(){var t=this.readLong();t<0?this._invalidate():this.pos+=t},ze.prototype.writeString=function(t){var e=Be.byteLength(t),r=this.buf;this.writeLong(e);var n,o,i,s,a=this.pos;if(this.pos+=e,!(this.pos>r.length))if(e>64&&"function"==typeof Be.prototype.utf8Write)r.utf8Write(t,a,e);else for(n=0,o=e;n<o;n++)(i=t.charCodeAt(n))<128?r[a++]=i:i<2048?(r[a++]=i>>6|192,r[a++]=63&i|128):55296==(64512&i)&&56320==(64512&(s=t.charCodeAt(n+1)))?(i=65536+((1023&i)<<10)+(1023&s),n++,r[a++]=i>>18|240,r[a++]=i>>12&63|128,r[a++]=i>>6&63|128,r[a++]=63&i|128):(r[a++]=i>>12|224,r[a++]=i>>6&63|128,r[a++]=63&i|128)},"function"==typeof Be.prototype.latin1Write?ze.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,this.pos>this.buf.length||this.buf.latin1Write(t,r,e)}:"function"==typeof Be.prototype.binaryWrite?ze.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,this.pos>this.buf.length||this.buf.binaryWrite(t,r,e)}:ze.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,this.pos>this.buf.length||this.buf.write(t,r,e,"binary")},ze.prototype.matchBoolean=function(t){return this.buf[this.pos++]-t.buf[t.pos++]},ze.prototype.matchInt=ze.prototype.matchLong=function(t){var e=this.readLong(),r=t.readLong();return e===r?0:e<r?-1:1},ze.prototype.matchFloat=function(t){var e=this.readFloat(),r=t.readFloat();return e===r?0:e<r?-1:1},ze.prototype.matchDouble=function(t){var e=this.readDouble(),r=t.readDouble();return e===r?0:e<r?-1:1},ze.prototype.matchFixed=function(t,e){return this.readFixed(e).compare(t.readFixed(e))},ze.prototype.matchBytes=ze.prototype.matchString=function(t){var e=this.readLong(),r=this.pos;this.pos+=e;var n=t.readLong(),o=t.pos;t.pos+=n;var i=this.buf.slice(r,this.pos),s=t.buf.slice(o,t.pos);return i.compare(s)},ze.prototype.unpackLongBytes=function(){var t,e,r=Re(8),n=0,o=0,i=6,s=this.buf;for(e=1&(t=s[this.pos++]),r.fill(0),n|=(127&t)>>1;128&t;)n|=(127&(t=s[this.pos++]))<<i,(i+=7)>=8&&(i-=8,r[o++]=n,n>>=8);return r[o]=n,e&&De(r,8),r},ze.prototype.packLongBytes=function(t){var e,r=(128&t[7])>>7,n=this.buf,o=1,i=0,s=3;r?(De(t,8),e=1):e=0;for(var a=[t.readUIntLE(0,3),t.readUIntLE(3,3),t.readUIntLE(6,2)];s&&!a[--s];);for(;i<s;)for(e|=a[i++]<<o,o+=24;o>7;)n[this.pos++]=127&e|128,e>>=7,o-=7;e|=a[s]<<o;do{n[this.pos]=127&e,e>>=7}while(e&&(n[this.pos++]|=128));this.pos++,r&&De(t,8)};var Ve={abstractFunction:function(){throw new Error("abstract")},addDeprecatedGetters:function(t,e){var r,n,o,i,s=t.prototype;for(r=0,n=e.length;r<n;r++)s[i="get"+Le(o=e[r])]=Oe.deprecate(a(o),"use `."+o+"` instead of `."+i+"()`");function a(t){return function(){var e=this[t];return"function"==typeof e?e.apply(this,arguments):e}}},bufferFrom:Ie,capitalize:Le,copyOwnProperties:function(t,e,r){var n,o,i,s=Object.getOwnPropertyNames(t);for(n=0,o=s.length;n<o;n++)if(i=s[n],!e.hasOwnProperty(i)||r){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,a)}return e},getHash:function(t,e){e=e||"md5";var r=Se.createHash(e);return r.end(t),r.read()},compare:function(t,e){return t===e?0:t<e?-1:1},getOption:function(t,e,r){var n=t[e];return void 0===n?r:n},impliedNamespace:function(t){var e=/^(.*)\.[^.]+$/.exec(t);return e?e[1]:void 0},isValidName:Pe,jsonEnd:function(t,e){e|=0;var r=t.charAt(e++);if(/[\d-]/.test(r)){for(;/[eE\d.+-]/.test(t.charAt(e));)e++;return e}if(/true|null/.test(t.slice(e-1,e+3)))return e+3;if(/false/.test(t.slice(e-1,e+4)))return e+4;var n=0,o=!1;do{switch(r){case"{":case"[":o||n++;break;case"}":case"]":if(!o&&! --n)return e;break;case'"':if(o=!o,!n&&!o)return e;break;case"\\":e++}}while(r=t.charAt(e++));return-1},newBuffer:Re,objectValues:function(t){return Object.keys(t).map((function(e){return t[e]}))},qualify:function(t,e){return~t.indexOf(".")?t=t.replace(/^\./,""):e&&(t=e+"."+t),t.split(".").forEach((function(e){if(!Pe(e))throw new Error(Ne("invalid name: %j",t))})),t},toMap:function(t,e){var r,n,o={};for(r=0;r<t.length;r++)o[e(n=t[r])]=n;return o},singleIndexOf:function(t,e){var r,n,o=-1;if(!t)return-1;for(r=0,n=t.length;r<n;r++)if(t[r]===e){if(o>=0)return-2;o=r}return o},hasDuplicates:function(t,e){var r,n,o,i=Object.create(null);for(r=0,n=t.length;r<n;r++){if(o=t[r],e&&(o=e(o)),i[o])return!0;i[o]=!0}return!1},unqualify:function(t){var e=t.split(".");return e[e.length-1]},BufferPool:Ce,Lcg:Fe,OrderedQueue:Ue,Tap:ze},Me=nt,Ye=Ae,Je=Me.Buffer,He=Me.SlowBuffer,qe=Ve.Tap,$e=Ye.debuglog("avsc:types"),We=Ye.format,Ze={array:gr,boolean:nr,bytes:pr,double:ar,enum:lr,error:mr,fixed:yr,float:sr,int:or,long:ir,map:dr,null:rr,record:mr,string:ur},Ge=new Ve.Lcg,Xe=new qe(new He(1024)),Qe=null,Ke=[];function tr(t,e){var r;if(Qe?(r=Qe,Ke.push([Qe,this]),Qe=null):r=this,this._hash=new Tr,this.name=void 0,this.aliases=void 0,this.doc=t&&t.doc?""+t.doc:void 0,t){var n=t.name,o=void 0===t.namespace?e&&e.namespace:t.namespace;if(void 0!==n){if(Sr(n=Rr(n,o)))throw new Error(We("cannot rename primitive type: %j",n));var i=e&&e.registry;if(i){if(void 0!==i[n])throw new Error(We("duplicate type name: %s",n));i[n]=r}}else if(e&&e.noAnonymousTypes)throw new Error(We("missing name property in schema: %j",t));this.name=n,this.aliases=t.aliases?t.aliases.map((function(t){return Rr(t,o)})):[]}}function er(t){tr.call(this),this._branchConstructor=this._createBranchConstructor(),t||Object.freeze(this)}function rr(){er.call(this)}function nr(){er.call(this)}function or(){er.call(this)}function ir(){er.call(this)}function sr(){er.call(this)}function ar(){er.call(this)}function ur(){er.call(this)}function pr(){er.call(this)}function fr(t,e){if(tr.call(this),!Array.isArray(t))throw new Error(We("non-array union schema: %j",t));if(!t.length)throw new Error("empty union");this.types=Object.freeze(t.map((function(t){return tr.forSchema(t,e)}))),this._branchIndices={},this.types.forEach((function(t,e){if(tr.isType(t,"union"))throw new Error("unions cannot be directly nested");var r=t.branchName;if(void 0!==this._branchIndices[r])throw new Error(We("duplicate union branch name: %j",r));this._branchIndices[r]=e}),this)}function cr(t,e){fr.call(this,t,e),this._dynamicBranches=null,this._bucketIndices={},this.types.forEach((function(t,e){if(tr.isType(t,"abstract","logical"))this._dynamicBranches||(this._dynamicBranches=[]),this._dynamicBranches.push({index:e,type:t});else{var r=Ir(t);if(void 0!==this._bucketIndices[r])throw new Error(We("ambiguous unwrapped union: %j",this));this._bucketIndices[r]=e}}),this),Object.freeze(this)}function hr(t,e){fr.call(this,t,e),Object.freeze(this)}function lr(t,e){if(tr.call(this,t,e),!Array.isArray(t.symbols)||!t.symbols.length)throw new Error(We("invalid enum symbols: %j",t.symbols));if(this.symbols=Object.freeze(t.symbols.slice()),this._indices={},this.symbols.forEach((function(t,e){if(!Ve.isValidName(t))throw new Error(We("invalid %s symbol: %j",this,t));if(void 0!==this._indices[t])throw new Error(We("duplicate %s symbol: %j",this,t));this._indices[t]=e}),this),this.default=t.default,void 0!==this.default&&void 0===this._indices[this.default])throw new Error(We("invalid %s default: %j",this,this.default));this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}function yr(t,e){if(tr.call(this,t,e),t.size!==(0|t.size)||t.size<0)throw new Error(We("invalid %s size",this.branchName));this.size=0|t.size,this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}function dr(t,e){if(tr.call(this),!t.values)throw new Error(We("missing map values: %j",t));this.valuesType=tr.forSchema(t.values,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}function gr(t,e){if(tr.call(this),!t.items)throw new Error(We("missing array items: %j",t));this.itemsType=tr.forSchema(t.items,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}function mr(t,e){var r=(e=e||{}).namespace;if(void 0!==t.namespace)e.namespace=t.namespace;else if(t.name){var n=Ve.impliedNamespace(t.name);void 0!==n&&(e.namespace=n)}if(tr.call(this,t,e),!Array.isArray(t.fields))throw new Error(We("non-array record fields: %j",t.fields));if(Ve.hasDuplicates(t.fields,(function(t){return t.name})))throw new Error(We("duplicate field name: %j",t.fields));this._fieldsByName={},this.fields=Object.freeze(t.fields.map((function(t){var r=new wr(t,e);return this._fieldsByName[r.name]=r,r}),this)),this._branchConstructor=this._createBranchConstructor(),this._isError="error"===t.type,this.recordConstructor=this._createConstructor(e.errorStackTraces,e.omitRecordMethods),this._read=this._createReader(),this._skip=this._createSkipper(),this._write=this._createWriter(),this._check=this._createChecker(),e.namespace=r,Object.freeze(this)}function vr(t,e){this._logicalTypeName=t.logicalType,tr.call(this),Qe=this;try{this._underlyingType=tr.forSchema(t,e)}finally{Qe=null;var r=Ke.length;r&&Ke[r-1][0]===this&&Ke.pop()}tr.isType(this.underlyingType,"union")?this._branchConstructor=this.underlyingType._branchConstructor:this._branchConstructor=this.underlyingType._createBranchConstructor()}function _r(t){this._concreteTypeName="long",er.call(this,!0),this._noUnpack=!!t}function wr(t,e){var r=t.name;if("string"!=typeof r||!Ve.isValidName(r))throw new Error(We("invalid field name: %s",r));this.name=r,this.type=tr.forSchema(t.type,e),this.aliases=t.aliases||[],this.doc=void 0!==t.doc?""+t.doc:void 0,this._order=function(t){switch(t){case"ascending":return 1;case"descending":return-1;case"ignore":return 0;default:throw new Error(We("invalid order: %j",t))}}(void 0===t.order?"ascending":t.order);var n=t.default;if(void 0!==n){var o,i=this.type;try{o=i._copy(n,{coerce:2,wrap:2})}catch(t){var s=We("incompatible field default %j (%s)",n,t.message);throw tr.isType(i,"union")&&(s+=We(", union defaults must match the first branch's type (%j)",i.types[0])),new Error(s)}Sr(i.typeName)&&"bytes"!==i.typeName?this.defaultValue=function(){return o}:this.defaultValue=function(){return i._copy(o)}}Object.freeze(this)}function br(t){this._readerType=t,this._read=null,this.itemsType=null,this.size=0,this.symbols=null,this.valuesType=null}function Tr(){this.str=void 0}function Er(t,e,r,n){if(r){if(r._readerType!==t)throw new Error("invalid resolver");return r._read(e,n)}return t._read(e)}function kr(t){var e={};t.name&&(e[t.name]=!0);var r,n,o=t.aliases;for(r=0,n=o.length;r<n;r++)e[o[r]]=!0;return Object.keys(e)}function Ar(t,e,r){if(!e.name)return!0;var n,o,i,s=r?e.name:Ve.unqualify(e.name),a=kr(t);for(n=0,o=a.length;n<o;n++)if(i=a[n],r||(i=Ve.unqualify(i)),i===s)return!0;return!1}function Sr(t){var e=Ze[t];return e&&e.prototype instanceof er}function Or(t){if("error"===t)t="record";else{var e=/^([^:]+):(.*)$/.exec(t);e&&(t="union"===e[1]?e[2]+"Union":e[1])}return Ve.capitalize(t)+"Type"}function Br(t){var e=t.readLong();return e<0&&(e=-e,t.skipLong()),e}function jr(t){return t>=-9007199254740990&&t<=9007199254740990}function xr(t){return t&&"Buffer"===t.type&&Array.isArray(t.data)}function Nr(t,e){throw new Error(We("invalid %j: %j",e.schema(),t))}function Rr(t,e){var r=Ve.unqualify(t);return Sr(r)?r:Ve.qualify(t,e)}function Ir(t){var e=t.typeName;switch(e){case"double":case"float":case"int":case"long":return"number";case"bytes":case"fixed":return"buffer";case"enum":return"string";case"map":case"error":case"record":return"object";default:return e}}function Lr(t){if(null===t)return"null";var e=typeof t;if("object"===e){if(Array.isArray(t))return"array";if(Je.isBuffer(t))return"buffer"}return e}tr.forSchema=function(t,e){(e=e||{}).registry=e.registry||{};var r,n=function(t){switch(!0===t?t="always":!1===t?t="never":void 0===t?t="auto":"string"==typeof t&&(t=t.toLowerCase()),t){case"always":return hr;case"never":return cr;case"auto":return;default:throw new Error(We("invalid wrap unions option: %j",t))}}(e.wrapUnions);if(null===t)throw new Error('invalid type: null (did you mean "null"?)');if(tr.isType(t))return t;if(e.typeHook&&(r=e.typeHook(t,e))){if(!tr.isType(r))throw new Error(We("invalid typehook return value: %j",r));return r}if("string"==typeof t){if(t=Rr(t,e.namespace),r=e.registry[t])return r;if(Sr(t))return e.registry[t]=tr.forSchema({type:t},e);throw new Error(We("undefined type name: %s",t))}if(t.logicalType&&e.logicalTypes&&!Qe){var o=e.logicalTypes[t.logicalType];if(o){var i=e.namespace,s={};Object.keys(e.registry).forEach((function(t){s[t]=e.registry[t]}));try{return $e("instantiating logical type for %s",t.logicalType),new o(t,e)}catch(r){if($e("failed to instantiate logical type for %s",t.logicalType),e.assertLogicalTypes)throw r;Qe=null,e.namespace=i,e.registry=s}}}if(Array.isArray(t)){var a=Qe;Qe=null;var u=t.map((function(t){return tr.forSchema(t,e)}));n||(n=function(t){var e,r,n,o,i={};for(e=0,r=t.length;e<r;e++)if(o=t[e],!tr.isType(o,"logical")){if(i[n=Ir(o)])return!0;i[n]=!0}return!1}(u)?hr:cr),Qe=a,r=new n(u,e)}else r=function(r){var n=Ze[r];if(void 0===n)throw new Error(We("unknown type: %j",r));return new n(t,e)}(t.type);return r},tr.forValue=function(t,e){if((e=e||{}).emptyArrayType=e.emptyArrayType||tr.forSchema({type:"array",items:"null"}),e.valueHook){var r=e.valueHook(t,e);if(void 0!==r){if(!tr.isType(r))throw new Error(We("invalid value hook return value: %j",r));return r}}switch(typeof t){case"string":return tr.forSchema("string",e);case"boolean":return tr.forSchema("boolean",e);case"number":return(0|t)===t?tr.forSchema("int",e):Math.abs(t)<9007199254740991?tr.forSchema("float",e):tr.forSchema("double",e);case"object":if(null===t)return tr.forSchema("null",e);if(Array.isArray(t))return t.length?tr.forSchema({type:"array",items:tr.forTypes(t.map((function(t){return tr.forValue(t,e)})),e)},e):e.emptyArrayType;if(Je.isBuffer(t))return tr.forSchema("bytes",e);var n=Object.keys(t);return n.some((function(t){return!Ve.isValidName(t)}))?tr.forSchema({type:"map",values:tr.forTypes(n.map((function(r){return tr.forValue(t[r],e)})),e)},e):tr.forSchema({type:"record",fields:n.map((function(r){return{name:r,type:tr.forValue(t[r],e)}}))},e);default:throw new Error(We("cannot infer type from: %j",t))}},tr.forTypes=function(t,e){if(!t.length)throw new Error("no types to combine");if(1===t.length)return t[0];e=e||{};var r=[],n=0,o=!0;if(t.forEach((function(t){switch(t.typeName){case"union:unwrapped":o=!1,r=r.concat(t.types);break;case"union:wrapped":n++,r=r.concat(t.types);break;case"null":r.push(t);break;default:o=!1,r.push(t)}})),n){if(!o)throw new Error("cannot combine wrapped union");var i={};r.forEach((function(t){var e=t.branchName,r=i[e];if(r){if(!t.equals(r))throw new Error("inconsistent branch type")}else i[e]=t}));var s,a=e.wrapUnions;e.wrapUnions=!0;try{s=tr.forSchema(Object.keys(i).map((function(t){return i[t]})),e)}catch(t){throw e.wrapUnions=a,t}return e.wrapUnions=a,s}var u={};r.forEach((function(t){var e=Ir(t),r=u[e];r||(u[e]=r=[]),r.push(t)}));var p=Object.keys(u).map((function(t){var r=u[t];if(1===r.length)return r[0];switch(t){case"null":case"boolean":return r[0];case"number":return function(t){var e,r,n,o,i=["int","long","float","double"],s=-1,a=null;for(e=0,r=t.length;e<r;e++)n=t[e],(o=i.indexOf(n.typeName))>s&&(s=o,a=n);return a}(r);case"string":return function(t,e){var r,n,o,i,s={};for(r=0,n=t.length;r<n;r++){if("string"===(o=t[r]).typeName)return o;var a,u;for(a=0,u=(i=o.symbols).length;a<u;a++)s[i[a]]=!0}return tr.forSchema({type:"enum",symbols:Object.keys(s)},e)}(r,e);case"buffer":return function(t,e){var r,n,o,i=-1;for(r=0,n=t.length;r<n;r++){if("bytes"===(o=t[r]).typeName)return o;-1===i?i=o.size:o.size!==i&&(i=-2)}return i<0?tr.forSchema("bytes",e):t[0]}(r,e);case"array":return(r=r.filter((function(t){return t!==e.emptyArrayType}))).length?tr.forSchema({type:"array",items:tr.forTypes(r.map((function(t){return t.itemsType})),e)},e):e.emptyArrayType;default:return function(t,e){var r,n,o,i,s,a=[],u={},p={},f=!0;for(r=0,n=t.length;r<n;r++){var c,h,l,y,d,g;if("map"===(o=t[r]).typeName)f=!1,a.push(o.valuesType);else for(c=0,h=(i=o.fields).length;c<h;c++)d=(l=i[c]).name,g=l.type,a.push(g),f&&(u[d]||(u[d]=[]),u[d].push(g),void 0!==(y=l.defaultValue())&&(p[d]=y))}if(f){var m=Object.keys(u);for(r=0,n=m.length;r<n;r++)d=m[r],u[d].length<t.length&&void 0===p[d]&&(e&&e.strictDefaults?f=!1:(u[d].unshift(tr.forSchema("null",e)),p[d]=null))}s=f?{type:"record",fields:m.map((function(t){var r=tr.forTypes(u[t],e),n=p[t];if(void 0!==n&&~r.typeName.indexOf("union")){var o,i,s=r.types.slice();for(o=0,i=s.length;o<i&&!s[o].isValid(n);o++);if(o>0){var a=s[0];s[0]=s[o],s[o]=a,r=tr.forSchema(s,e)}}return{name:t,type:r,default:p[t]}}))}:{type:"map",values:tr.forTypes(a,e)};return tr.forSchema(s,e)}(r,e)}}));return 1===p.length?p[0]:tr.forSchema(p,e)},tr.isType=function(){var t=arguments.length;if(!t)return!1;var e=arguments[0];if(!e||"function"!=typeof e._update||"function"!=typeof e.fingerprint)return!1;if(1===t)return!0;var r,n=e.typeName;for(r=1;r<t;r++)if(0===n.indexOf(arguments[r]))return!0;return!1},tr.__reset=function(t){$e("resetting type buffer to %d",t),Xe.buf=new He(t)},Object.defineProperty(tr.prototype,"branchName",{enumerable:!0,get:function(){var t=tr.isType(this,"logical")?this.underlyingType:this;return t.name?t.name:tr.isType(t,"abstract")?t._concreteTypeName:tr.isType(t,"union")?void 0:t.typeName}}),tr.prototype.clone=function(t,e){return e?(e={coerce:0|!!e.coerceBuffers,fieldHook:e.fieldHook,qualifyNames:!!e.qualifyNames,skip:!!e.skipMissingFields,wrap:0|!!e.wrapUnions},this._copy(t,e)):this.fromBuffer(this.toBuffer(t))},tr.prototype.compare=Ve.abstractFunction,tr.prototype.compareBuffers=function(t,e){return this._match(new qe(t),new qe(e))},tr.prototype.createResolver=function(t,e){if(!tr.isType(t))throw new Error(We("not a type: %j",t));if(!tr.isType(this,"union","logical")&&tr.isType(t,"logical"))return this.createResolver(t.underlyingType,e);var r,n;if((e=e||{}).registry=e.registry||{},tr.isType(this,"record","error")&&tr.isType(t,"record","error")&&(n=this.name+":"+t.name,r=e.registry[n]))return r;if(r=new br(this),n&&(e.registry[n]=r),tr.isType(t,"union")){var o=t.types.map((function(t){return this.createResolver(t,e)}),this);r._read=function(t){var e=t.readLong();if(void 0===o[e])throw new Error(We("invalid union index: %s",e));return o[e]._read(t)}}else this._update(r,t,e);if(!r._read)throw new Error(We("cannot read %s as %s",t,this));return Object.freeze(r)},tr.prototype.decode=function(t,e,r){var n=new qe(t,e),o=Er(this,n,r);return n.isValid()?{value:o,offset:n.pos}:{value:void 0,offset:-1}},tr.prototype.encode=function(t,e,r){var n=new qe(e,r);return this._write(n,t),n.isValid()?n.pos:e.length-n.pos},tr.prototype.equals=function(t,e){var r=tr.isType(t)&&this.fingerprint().equals(t.fingerprint());return r&&e&&e.strict?JSON.stringify(this.schema({exportAttrs:!0}))===JSON.stringify(t.schema({exportAttrs:!0})):r},tr.prototype.fingerprint=function(t){if(t)return Ve.getHash(JSON.stringify(this.schema()),t);if(!this._hash.str){var e=JSON.stringify(this.schema());this._hash.str=Ve.getHash(e).toString("binary")}return Ve.bufferFrom(this._hash.str,"binary")},tr.prototype.fromBuffer=function(t,e,r){var n=new qe(t),o=Er(this,n,e,r);if(!n.isValid())throw new Error("truncated buffer");if(!r&&n.pos<t.length)throw new Error("trailing data");return o},tr.prototype.fromString=function(t){return this._copy(JSON.parse(t),{coerce:2})},tr.prototype.inspect=function(){var t=this.typeName,e=Or(t);if(Sr(t))return We("<%s>",e);var r=this.schema({exportAttrs:!0,noDeref:!0});return"object"!=typeof r||tr.isType(this,"logical")||(r.type=void 0),We("<%s %j>",e,r)},tr.prototype.isValid=function(t,e){var r,n,o=0|(e&&e.noUndeclaredFields),i=e&&e.errorHook;return i&&(n=[],r=function(e,r){i.call(this,n.slice(),e,r,t)}),this._check(t,o,r,n)},tr.prototype.random=Ve.abstractFunction,tr.prototype.schema=function(t){return this._attrs({exportAttrs:!(!t||!t.exportAttrs),noDeref:!(!t||!t.noDeref)})},tr.prototype.toBuffer=function(t){Xe.pos=0,this._write(Xe,t);var e=Ve.newBuffer(Xe.pos);return Xe.isValid()?Xe.buf.copy(e,0,0,Xe.pos):this._write(new qe(e),t),e},tr.prototype.toJSON=function(){return this.schema({exportAttrs:!0})},tr.prototype.toString=function(t){return void 0===t?JSON.stringify(this.schema({noDeref:!0})):JSON.stringify(this._copy(t,{coerce:3}))},tr.prototype.wrap=function(t){var e=this._branchConstructor;return null===e?null:new e(t)},tr.prototype._attrs=function(t){t.derefed=t.derefed||{};var e=this.name;if(void 0!==e){if(t.noDeref||t.derefed[e])return e;t.derefed[e]=!0}var r={};void 0!==this.name&&(r.name=e),r.type=this.typeName;var n=this._deref(r,t);return void 0!==n&&(r=n),t.exportAttrs&&(this.aliases&&this.aliases.length&&(r.aliases=this.aliases),void 0!==this.doc&&(r.doc=this.doc)),r},tr.prototype._createBranchConstructor=function(){var t=this.branchName;if("null"===t)return null;var e=~t.indexOf(".")?"this['"+t+"']":"this."+t,r=new Function("return function Branch$(val) { "+e+" = val; };")();return r.type=this,r.prototype.unwrap=new Function("return "+e+";"),r.prototype.unwrapped=r.prototype.unwrap,r},tr.prototype._peek=function(t){var e=t.pos,r=this._read(t);return t.pos=e,r},tr.prototype._check=Ve.abstractFunction,tr.prototype._copy=Ve.abstractFunction,tr.prototype._deref=Ve.abstractFunction,tr.prototype._match=Ve.abstractFunction,tr.prototype._read=Ve.abstractFunction,tr.prototype._skip=Ve.abstractFunction,tr.prototype._update=Ve.abstractFunction,tr.prototype._write=Ve.abstractFunction,tr.prototype.getAliases=function(){return this.aliases},tr.prototype.getFingerprint=tr.prototype.fingerprint,tr.prototype.getName=function(t){return this.name||!t?this.name:this.branchName},tr.prototype.getSchema=tr.prototype.schema,tr.prototype.getTypeName=function(){return this.typeName},Ye.inherits(er,tr),er.prototype._update=function(t,e){e.typeName===this.typeName&&(t._read=this._read)},er.prototype._copy=function(t){return this._check(t,void 0,Nr),t},er.prototype._deref=function(){return this.typeName},er.prototype.compare=Ve.compare,Ye.inherits(rr,er),rr.prototype._check=function(t,e,r){var n=null===t;return!n&&r&&r(t,this),n},rr.prototype._read=function(){return null},rr.prototype._skip=function(){},rr.prototype._write=function(t,e){null!==e&&Nr(e,this)},rr.prototype._match=function(){return 0},rr.prototype.compare=rr.prototype._match,rr.prototype.typeName="null",rr.prototype.random=rr.prototype._read,Ye.inherits(nr,er),nr.prototype._check=function(t,e,r){var n="boolean"==typeof t;return!n&&r&&r(t,this),n},nr.prototype._read=function(t){return t.readBoolean()},nr.prototype._skip=function(t){t.skipBoolean()},nr.prototype._write=function(t,e){"boolean"!=typeof e&&Nr(e,this),t.writeBoolean(e)},nr.prototype._match=function(t,e){return t.matchBoolean(e)},nr.prototype.typeName="boolean",nr.prototype.random=function(){return Ge.nextBoolean()},Ye.inherits(or,er),or.prototype._check=function(t,e,r){var n=t===(0|t);return!n&&r&&r(t,this),n},or.prototype._read=function(t){return t.readInt()},or.prototype._skip=function(t){t.skipInt()},or.prototype._write=function(t,e){e!==(0|e)&&Nr(e,this),t.writeInt(e)},or.prototype._match=function(t,e){return t.matchInt(e)},or.prototype.typeName="int",or.prototype.random=function(){return 0|Ge.nextInt(1e3)},Ye.inherits(ir,er),ir.prototype._check=function(t,e,r){var n="number"==typeof t&&t%1==0&&jr(t);return!n&&r&&r(t,this),n},ir.prototype._read=function(t){var e=t.readLong();if(!jr(e))throw new Error("potential precision loss");return e},ir.prototype._skip=function(t){t.skipLong()},ir.prototype._write=function(t,e){("number"!=typeof e||e%1||!jr(e))&&Nr(e,this),t.writeLong(e)},ir.prototype._match=function(t,e){return t.matchLong(e)},ir.prototype._update=function(t,e){switch(e.typeName){case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=this._read}},ir.prototype.typeName="long",ir.prototype.random=function(){return Ge.nextInt()},ir.__with=function(t,e){t=t||{};var r={toBuffer:"_toBuffer",fromBuffer:"_fromBuffer",fromJSON:"_fromJSON",toJSON:"_toJSON",isValid:"_isValid",compare:"compare"},n=new _r(e);return Object.keys(r).forEach((function(e){if(void 0===t[e])throw new Error(We("missing method implementation: %s",e));n[r[e]]=t[e]})),Object.freeze(n)},Ye.inherits(sr,er),sr.prototype._check=function(t,e,r){var n="number"==typeof t;return!n&&r&&r(t,this),n},sr.prototype._read=function(t){return t.readFloat()},sr.prototype._skip=function(t){t.skipFloat()},sr.prototype._write=function(t,e){"number"!=typeof e&&Nr(e,this),t.writeFloat(e)},sr.prototype._match=function(t,e){return t.matchFloat(e)},sr.prototype._update=function(t,e){switch(e.typeName){case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(t){return t.readLong()}}},sr.prototype.typeName="float",sr.prototype.random=function(){return Ge.nextFloat(1e3)},Ye.inherits(ar,er),ar.prototype._check=function(t,e,r){var n="number"==typeof t;return!n&&r&&r(t,this),n},ar.prototype._read=function(t){return t.readDouble()},ar.prototype._skip=function(t){t.skipDouble()},ar.prototype._write=function(t,e){"number"!=typeof e&&Nr(e,this),t.writeDouble(e)},ar.prototype._match=function(t,e){return t.matchDouble(e)},ar.prototype._update=function(t,e){switch(e.typeName){case"double":case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(t){return t.readLong()}}},ar.prototype.typeName="double",ar.prototype.random=function(){return Ge.nextFloat()},Ye.inherits(ur,er),ur.prototype._check=function(t,e,r){var n="string"==typeof t;return!n&&r&&r(t,this),n},ur.prototype._read=function(t){return t.readString()},ur.prototype._skip=function(t){t.skipString()},ur.prototype._write=function(t,e){"string"!=typeof e&&Nr(e,this),t.writeString(e)},ur.prototype._match=function(t,e){return t.matchString(e)},ur.prototype._update=function(t,e){switch(e.typeName){case"bytes":case"string":t._read=this._read}},ur.prototype.typeName="string",ur.prototype.random=function(){return Ge.nextString(Ge.nextInt(32))},Ye.inherits(pr,er),pr.prototype._check=function(t,e,r){var n=Je.isBuffer(t);return!n&&r&&r(t,this),n},pr.prototype._read=function(t){return t.readBytes()},pr.prototype._skip=function(t){t.skipBytes()},pr.prototype._write=function(t,e){Je.isBuffer(e)||Nr(e,this),t.writeBytes(e)},pr.prototype._match=function(t,e){return t.matchBytes(e)},pr.prototype._update=ur.prototype._update,pr.prototype._copy=function(t,e){var r;switch(0|(e&&e.coerce)){case 3:return this._check(t,void 0,Nr),t.toString("binary");case 2:if("string"!=typeof t)throw new Error(We("cannot coerce to buffer: %j",t));return r=Ve.bufferFrom(t,"binary"),this._check(r,void 0,Nr),r;case 1:if(!xr(t))throw new Error(We("cannot coerce to buffer: %j",t));return r=Ve.bufferFrom(t.data),this._check(r,void 0,Nr),r;default:return this._check(t,void 0,Nr),Ve.bufferFrom(t)}},pr.prototype.compare=Je.compare,pr.prototype.typeName="bytes",pr.prototype.random=function(){return Ge.nextBuffer(Ge.nextInt(32))},Ye.inherits(fr,tr),fr.prototype._branchConstructor=function(){throw new Error("unions cannot be directly wrapped")},fr.prototype._skip=function(t){this.types[t.readLong()]._skip(t)},fr.prototype._match=function(t,e){var r=t.readLong(),n=e.readLong();return r===n?this.types[r]._match(t,e):r<n?-1:1},fr.prototype._deref=function(t,e){return this.types.map((function(t){return t._attrs(e)}))},fr.prototype.getTypes=function(){return this.types},Ye.inherits(cr,fr),cr.prototype._getIndex=function(t){var e=this._bucketIndices[Lr(t)];return this._dynamicBranches&&(e=this._getBranchIndex(t,e)),e},cr.prototype._getBranchIndex=function(t,e){var r,n,o,i=this._dynamicBranches;for(r=0,n=i.length;r<n;r++)if((o=i[r]).type._check(t)){if(void 0!==e)throw new Error("ambiguous conversion");e=o.index}return e},cr.prototype._check=function(t,e,r,n){var o=this._getIndex(t),i=void 0!==o;return i?this.types[o]._check(t,e,r,n):(r&&r(t,this),i)},cr.prototype._read=function(t){var e=t.readLong(),r=this.types[e];if(r)return r._read(t);throw new Error(We("invalid union index: %s",e))},cr.prototype._write=function(t,e){var r=this._getIndex(e);void 0===r&&Nr(e,this),t.writeLong(r),null!==e&&this.types[r]._write(t,e)},cr.prototype._update=function(t,e,r){var n,o,i;for(n=0,o=this.types.length;n<o;n++){try{i=this.types[n].createResolver(e,r)}catch(t){continue}return void(t._read=function(t){return i._read(t)})}},cr.prototype._copy=function(t,e){var r,n=e&&0|e.coerce,o=e&&0|e.wrap;if(2===o)r=0;else{switch(n){case 1:r=xr(t)&&void 0!==this._bucketIndices.buffer?this._bucketIndices.buffer:this._getIndex(t);break;case 2:if(null===t)r=this._bucketIndices.null;else if("object"==typeof t){var i=Object.keys(t);1===i.length&&(r=this._branchIndices[i[0]],t=t[i[0]])}break;default:r=this._getIndex(t)}void 0===r&&Nr(t,this)}var s=this.types[r];if(null===t||3===o)return s._copy(t,e);if(3===n){var a={};return a[s.branchName]=s._copy(t,e),a}return s._copy(t,e)},cr.prototype.compare=function(t,e){var r=this._getIndex(t),n=this._getIndex(e);if(void 0===r)Nr(t,this);else{if(void 0!==n)return r===n?this.types[r].compare(t,e):Ve.compare(r,n);Nr(e,this)}},cr.prototype.typeName="union:unwrapped",cr.prototype.random=function(){var t=Ge.nextInt(this.types.length);return this.types[t].random()},Ye.inherits(hr,fr),hr.prototype._check=function(t,e,r,n){var o=!1;if(null===t)o=void 0!==this._branchIndices.null;else if("object"==typeof t){var i=Object.keys(t);if(1===i.length){var s=i[0],a=this._branchIndices[s];if(void 0!==a)return r?(n.push(s),o=this.types[a]._check(t[s],e,r,n),n.pop(),o):this.types[a]._check(t[s],e)}}return!o&&r&&r(t,this),o},hr.prototype._read=function(t){var e=this.types[t.readLong()];if(!e)throw new Error(We("invalid union index"));var r=e._branchConstructor;return null===r?null:new r(e._read(t))},hr.prototype._write=function(t,e){var r,n,o;null===e?(void 0===(r=this._branchIndices.null)&&Nr(e,this),t.writeLong(r)):(1===(n=Object.keys(e)).length&&(o=n[0],r=this._branchIndices[o]),void 0===r&&Nr(e,this),t.writeLong(r),this.types[r]._write(t,e[o]))},hr.prototype._update=function(t,e,r){var n,o,i,s;for(n=0,o=this.types.length;n<o;n++){try{i=this.types[n].createResolver(e,r)}catch(t){continue}return s=this.types[n]._branchConstructor,void(t._read=s?function(t){return new s(i._read(t))}:function(){return null})}},hr.prototype._copy=function(t,e){var r,n,o,i=e&&0|e.wrap;if(2===i){var s=this.types[0];return null===t&&"null"===s.typeName?null:new s._branchConstructor(s._copy(t,e))}if(null===t&&void 0!==this._branchIndices.null)return null;if("object"==typeof t){var a=Object.keys(t);if(1===a.length){var u,p,f=a[0];if(void 0===(r=this._branchIndices[f])&&e.qualifyNames)for(u=0,n=this.types.length;u<n;u++)if((p=this.types[u]).name&&f===Ve.unqualify(p.name)){r=u;break}void 0!==r&&(o=this.types[r]._copy(t[f],e))}}if(1===i&&void 0===o)for(r=0,n=this.types.length;r<n&&void 0===o;)try{o=this.types[r]._copy(t,e)}catch(t){r++}if(void 0!==o)return 3===i?o:new this.types[r]._branchConstructor(o);Nr(t,this)},hr.prototype.compare=function(t,e){var r=null===t?"null":Object.keys(t)[0],n=null===e?"null":Object.keys(e)[0],o=this._branchIndices[r];return r===n?"null"===r?0:this.types[o].compare(t[r],e[r]):Ve.compare(o,this._branchIndices[n])},hr.prototype.typeName="union:wrapped",hr.prototype.random=function(){var t=Ge.nextInt(this.types.length),e=this.types[t],r=e._branchConstructor;return r?new r(e.random()):null},Ye.inherits(lr,tr),lr.prototype._check=function(t,e,r){var n=void 0!==this._indices[t];return!n&&r&&r(t,this),n},lr.prototype._read=function(t){var e=t.readLong(),r=this.symbols[e];if(void 0===r)throw new Error(We("invalid %s enum index: %s",this.name,e));return r},lr.prototype._skip=function(t){t.skipLong()},lr.prototype._write=function(t,e){var r=this._indices[e];void 0===r&&Nr(e,this),t.writeLong(r)},lr.prototype._match=function(t,e){return t.matchLong(e)},lr.prototype.compare=function(t,e){return Ve.compare(this._indices[t],this._indices[e])},lr.prototype._update=function(t,e,r){var n=this.symbols;"enum"===e.typeName&&Ar(this,e,!r.ignoreNamespaces)&&(e.symbols.every((function(t){return~n.indexOf(t)}))||void 0!==this.default)&&(t.symbols=e.symbols.map((function(t){return void 0===this._indices[t]?this.default:t}),this),t._read=e._read)},lr.prototype._copy=function(t){return this._check(t,void 0,Nr),t},lr.prototype._deref=function(t){t.symbols=this.symbols},lr.prototype.getSymbols=function(){return this.symbols},lr.prototype.typeName="enum",lr.prototype.random=function(){return Ge.choice(this.symbols)},Ye.inherits(yr,tr),yr.prototype._check=function(t,e,r){var n=Je.isBuffer(t)&&t.length===this.size;return!n&&r&&r(t,this),n},yr.prototype._read=function(t){return t.readFixed(this.size)},yr.prototype._skip=function(t){t.skipFixed(this.size)},yr.prototype._write=function(t,e){Je.isBuffer(e)&&e.length===this.size||Nr(e,this),t.writeFixed(e,this.size)},yr.prototype._match=function(t,e){return t.matchFixed(e,this.size)},yr.prototype.compare=Je.compare,yr.prototype._update=function(t,e,r){"fixed"===e.typeName&&this.size===e.size&&Ar(this,e,!r.ignoreNamespaces)&&(t.size=this.size,t._read=this._read)},yr.prototype._copy=pr.prototype._copy,yr.prototype._deref=function(t){t.size=this.size},yr.prototype.getSize=function(){return this.size},yr.prototype.typeName="fixed",yr.prototype.random=function(){return Ge.nextBuffer(this.size)},Ye.inherits(dr,tr),dr.prototype._check=function(t,e,r,n){if(!t||"object"!=typeof t||Array.isArray(t))return r&&r(t,this),!1;var o,i,s,a,u=Object.keys(t),p=!0;if(r){for(s=n.length,n.push(""),o=0,i=u.length;o<i;o++)a=n[s]=u[o],this.valuesType._check(t[a],e,r,n)||(p=!1);n.pop()}else for(o=0,i=u.length;o<i;o++)if(!this.valuesType._check(t[u[o]],e))return!1;return p},dr.prototype._read=function(t){for(var e,r=this.valuesType,n={};e=Br(t);)for(;e--;){n[t.readString()]=r._read(t)}return n},dr.prototype._skip=function(t){for(var e,r,n=this.valuesType;r=t.readLong();)if(r<0)e=t.readLong(),t.pos+=e;else for(;r--;)t.skipString(),n._skip(t)},dr.prototype._write=function(t,e){e&&"object"==typeof e&&!Array.isArray(e)||Nr(e,this);var r,n,o=this.valuesType,i=Object.keys(e),s=i.length;if(s)for(t.writeLong(s),r=0;r<s;r++)n=i[r],t.writeString(n),o._write(t,e[n]);t.writeLong(0)},dr.prototype._match=function(){throw new Error("maps cannot be compared")},dr.prototype._update=function(t,e,r){"map"===e.typeName&&(t.valuesType=this.valuesType.createResolver(e.valuesType,r),t._read=this._read)},dr.prototype._copy=function(t,e){if(t&&"object"==typeof t&&!Array.isArray(t)){var r,n,o,i=this.valuesType,s=Object.keys(t),a={};for(r=0,n=s.length;r<n;r++)a[o=s[r]]=i._copy(t[o],e);return a}Nr(t,this)},dr.prototype.compare=dr.prototype._match,dr.prototype.typeName="map",dr.prototype.getValuesType=function(){return this.valuesType},dr.prototype.random=function(){var t,e,r={};for(t=0,e=Ge.nextInt(10);t<e;t++)r[Ge.nextString(Ge.nextInt(20))]=this.valuesType.random();return r},dr.prototype._deref=function(t,e){t.values=this.valuesType._attrs(e)},Ye.inherits(gr,tr),gr.prototype._check=function(t,e,r,n){if(!Array.isArray(t))return r&&r(t,this),!1;var o,i,s,a=this.itemsType,u=!0;if(r){for(s=n.length,n.push(""),o=0,i=t.length;o<i;o++)n[s]=""+o,a._check(t[o],e,r,n)||(u=!1);n.pop()}else for(o=0,i=t.length;o<i;o++)if(!a._check(t[o],e))return!1;return u},gr.prototype._read=function(t){for(var e,r,n=this.itemsType,o=0;r=t.readLong();)for(r<0&&(r=-r,t.skipLong()),e=e||new Array(r);r--;)e[o++]=n._read(t);return e||[]},gr.prototype._skip=function(t){for(var e,r,n=this.itemsType;r=t.readLong();)if(r<0)e=t.readLong(),t.pos+=e;else for(;r--;)n._skip(t)},gr.prototype._write=function(t,e){Array.isArray(e)||Nr(e,this);var r,n=this.itemsType,o=e.length;if(o)for(t.writeLong(o),r=0;r<o;r++)n._write(t,e[r]);t.writeLong(0)},gr.prototype._match=function(t,e){for(var r,n=t.readLong(),o=e.readLong();n&&o;){if(r=this.itemsType._match(t,e))return r;--n||(n=Br(t)),--o||(o=Br(e))}return Ve.compare(n,o)},gr.prototype._update=function(t,e,r){"array"===e.typeName&&(t.itemsType=this.itemsType.createResolver(e.itemsType,r),t._read=this._read)},gr.prototype._copy=function(t,e){Array.isArray(t)||Nr(t,this);var r,n,o=new Array(t.length);for(r=0,n=t.length;r<n;r++)o[r]=this.itemsType._copy(t[r],e);return o},gr.prototype._deref=function(t,e){t.items=this.itemsType._attrs(e)},gr.prototype.compare=function(t,e){var r,n,o,i=t.length,s=e.length;for(r=0,n=Math.min(i,s);r<n;r++)if(o=this.itemsType.compare(t[r],e[r]))return o;return Ve.compare(i,s)},gr.prototype.getItemsType=function(){return this.itemsType},gr.prototype.typeName="array",gr.prototype.random=function(){var t,e,r=[];for(t=0,e=Ge.nextInt(10);t<e;t++)r.push(this.itemsType.random());return r},Ye.inherits(mr,tr),mr.prototype._getConstructorName=function(){return this.name?Ve.capitalize(Ve.unqualify(this.name)):this._isError?"Error$":"Record$"},mr.prototype._createConstructor=function(t,e){var r,n,o,i,s,a,u,p=[],f=[],c=[],h="";for(r=0,n=this.fields.length;r<n;r++)a=void 0!==(s=(o=this.fields[r]).defaultValue)(),i=o.name,t&&this._isError&&"stack"===i&&tr.isType(o.type,"string")&&!a&&(u=o),f.push("v"+r),h+="  ",a?(h+="if (v"+r+" === undefined) { ",h+="this."+i+" = d"+c.length+"(); ",h+="} else { this."+i+" = v"+r+"; }\n",p.push("d"+c.length),c.push(s)):h+="this."+i+" = v"+r+";\n";u&&(h+="  if (this.stack === undefined) { ","function"==typeof Error.captureStackTrace?h+="Error.captureStackTrace(this, this.constructor);":h+="this.stack = Error().stack;",h+=" }\n");var l="return function "+this._getConstructorName()+"(";l+=f.join()+") {\n"+h+"};";var y=new Function(p.join(),l).apply(void 0,c);if(e)return y;var d=this;return y.getType=function(){return d},y.type=d,this._isError&&(Ye.inherits(y,Error),y.prototype.name=this._getConstructorName()),y.prototype.clone=function(t){return d.clone(this,t)},y.prototype.compare=function(t){return d.compare(this,t)},y.prototype.isValid=function(t){return d.isValid(this,t)},y.prototype.toBuffer=function(){return d.toBuffer(this)},y.prototype.toString=function(){return d.toString(this)},y.prototype.wrap=function(){return d.wrap(this)},y.prototype.wrapped=y.prototype.wrap,y},mr.prototype._createChecker=function(){var t=[],e=[],r="return function check"+this._getConstructorName()+"(v, f, h, p) {\n";if(r+="  if (\n",r+="    v === null ||\n",r+="    typeof v != 'object' ||\n",r+="    (f && !this._checkFields(v))\n",r+="  ) {\n",r+="    if (h) { h(v, this); }\n",r+="    return false;\n",r+="  }\n",this.fields.length){for(n=0,o=this.fields.length;n<o;n++)i=this.fields[n],t.push("t"+n),e.push(i.type),void 0!==i.defaultValue()&&(r+="  var v"+n+" = v."+i.name+";\n");var n,o,i;for(r+="  if (h) {\n",r+="    var b = 1;\n",r+="    var j = p.length;\n",r+="    p.push('');\n",n=0,o=this.fields.length;n<o;n++)r+="    p[j] = '"+(i=this.fields[n]).name+"';\n",r+="    b &= ",void 0===i.defaultValue()?r+="t"+n+"._check(v."+i.name+", f, h, p);\n":(r+="v"+n+" === undefined || ",r+="t"+n+"._check(v"+n+", f, h, p);\n");r+="    p.pop();\n",r+="    return !!b;\n",r+="  } else {\n    return (\n      ",r+=this.fields.map((function(t,e){return void 0===t.defaultValue()?"t"+e+"._check(v."+t.name+", f)":"(v"+e+" === undefined || t"+e+"._check(v"+e+", f))"})).join(" &&\n      "),r+="\n    );\n  }\n"}else r+="  return true;\n";return r+="};",new Function(t.join(),r).apply(void 0,e)},mr.prototype._createReader=function(){var t,e,r=[],n=[this.recordConstructor];for(t=0,e=this.fields.length;t<e;t++)r.push("t"+t),n.push(this.fields[t].type);var o=this._getConstructorName(),i="return function read"+o+"(t) {\n";return i+="  return new "+o+"(\n    ",i+=r.map((function(t){return t+"._read(t)"})).join(",\n    "),i+="\n  );\n};",r.unshift(o),new Function(r.join(),i).apply(void 0,n)},mr.prototype._createSkipper=function(){var t,e,r=[],n="return function skip"+this._getConstructorName()+"(t) {\n",o=[];for(t=0,e=this.fields.length;t<e;t++)r.push("t"+t),o.push(this.fields[t].type),n+="  t"+t+"._skip(t);\n";return n+="}",new Function(r.join(),n).apply(void 0,o)},mr.prototype._createWriter=function(){var t,e,r,n,o=[],i="return function write"+this._getConstructorName()+"(t, v) {\n",s=[];for(t=0,e=this.fields.length;t<e;t++)r=this.fields[t],o.push("t"+t),s.push(r.type),i+="  ",void 0===r.defaultValue()?i+="t"+t+"._write(t, v."+r.name+");\n":(n=r.type.toBuffer(r.defaultValue()).toString("binary"),o.push("d"+t),s.push(n),i+="var v"+t+" = v."+r.name+";\n",i+="if (v"+t+" === undefined) {\n",i+="    t.writeBinary(d"+t+", "+n.length+");\n",i+="  } else {\n    t"+t+"._write(t, v"+t+");\n  }\n");return i+="}",new Function(o.join(),i).apply(void 0,s)},mr.prototype._update=function(t,e,r){if(!Ar(this,e,!r.ignoreNamespaces))throw new Error(We("no alias found for %s",e.name));var n,o,i,s,a,u,p,f=this.fields,c=e.fields,h=Ve.toMap(c,(function(t){return t.name})),l=[],y={};for(n=0;n<f.length;n++){for(a=kr(i=f[n]),u=[],o=0;o<a.length;o++)h[s=a[o]]&&u.push(s);if(u.length>1)throw new Error(We("ambiguous aliasing for %s.%s (%s)",e.name,i.name,u));if(u.length)s=u[0],p={resolver:i.type.createResolver(h[s].type,r),name:"_"+i.name},y[s]?y[s].push(p):y[s]=[p],l.push(p.name);else{if(void 0===i.defaultValue())throw new Error(We("no matching field for default-less %s.%s",e.name,i.name));l.push("undefined")}}var d=-1;for(n=c.length;n&&void 0===y[c[--n].name];)d=n;var g=this._getConstructorName(),m=[g],v=[this.recordConstructor],_="  return function read"+g+"(t, b) {\n";for(n=0;n<c.length;n++)if(n===d&&(_+="  if (!b) {\n"),void 0===y[s=(i=e.fields[n]).name])_+=~d&&n>=d?"    ":"  ",m.push("r"+n),v.push(i.type),_+="r"+n+"._skip(t);\n";else for(o=y[s].length;o--;)_+=~d&&n>=d?"    ":"  ",m.push("r"+n+"f"+o),p=y[s][o],v.push(p.resolver),_+="var "+p.name+" = ",_+="r"+n+"f"+o+"._"+(o?"peek":"read")+"(t);\n";~d&&(_+="  }\n"),_+="  return new "+g+"("+l.join()+");\n};",t._read=new Function(m.join(),_).apply(void 0,v)},mr.prototype._match=function(t,e){var r,n,o,i,s,a=this.fields;for(r=0,n=a.length;r<n;r++)if(i=(o=a[r])._order,s=o.type,i){if(i*=s._match(t,e))return i}else s._skip(t),s._skip(e);return 0},mr.prototype._checkFields=function(t){var e,r,n=Object.keys(t);for(e=0,r=n.length;e<r;e++)if(!this._fieldsByName[n[e]])return!1;return!0},mr.prototype._copy=function(t,e){var r,n,o,i,s=e&&e.fieldHook,a=[void 0];for(r=0,n=this.fields.length;r<n;r++)void 0===(i=t[(o=this.fields[r]).name])&&o.hasOwnProperty("defaultValue")&&(i=o.defaultValue()),(e&&!e.skip||void 0!==i)&&(i=o.type._copy(i,e)),s&&(i=s(o,i,this)),a.push(i);var u=this.recordConstructor;return new(u.bind.apply(u,a))},mr.prototype._deref=function(t,e){t.fields=this.fields.map((function(t){var r=t.type,n={name:t.name,type:r._attrs(e)};if(e.exportAttrs){var o=t.defaultValue();void 0!==o&&(n.default=r._copy(o,{coerce:3,wrap:3}));var i=t.order;"ascending"!==i&&(n.order=i);var s=t.aliases;s.length&&(n.aliases=s);var a=t.doc;void 0!==a&&(n.doc=a)}return n}))},mr.prototype.compare=function(t,e){var r,n,o,i,s,a,u=this.fields;for(r=0,n=u.length;r<n;r++)if(i=(o=u[r]).name,s=o._order,a=o.type,s&&(s*=a.compare(t[i],e[i])))return s;return 0},mr.prototype.random=function(){var t=this.fields.map((function(t){return t.type.random()}));t.unshift(void 0);var e=this.recordConstructor;return new(e.bind.apply(e,t))},mr.prototype.field=function(t){return this._fieldsByName[t]},mr.prototype.getField=mr.prototype.field,mr.prototype.getFields=function(){return this.fields},mr.prototype.getRecordConstructor=function(){return this.recordConstructor},Object.defineProperty(mr.prototype,"typeName",{enumerable:!0,get:function(){return this._isError?"error":"record"}}),Ye.inherits(vr,tr),Object.defineProperty(vr.prototype,"typeName",{enumerable:!0,get:function(){return"logical:"+this._logicalTypeName}}),Object.defineProperty(vr.prototype,"underlyingType",{enumerable:!0,get:function(){if(this._underlyingType)return this._underlyingType;var t,e,r;for(t=0,e=Ke.length;t<e;t++)if((r=Ke[t])[0]===this)return r[1]}}),vr.prototype.getUnderlyingType=function(){return this.underlyingType},vr.prototype._read=function(t){return this._fromValue(this.underlyingType._read(t))},vr.prototype._write=function(t,e){this.underlyingType._write(t,this._toValue(e))},vr.prototype._check=function(t,e,r,n){try{var o=this._toValue(t)}catch(t){}return void 0===o?(r&&r(t,this),!1):this.underlyingType._check(o,e,r,n)},vr.prototype._copy=function(t,e){var r=this.underlyingType;switch(e&&e.coerce){case 3:return r._copy(this._toValue(t),e);case 2:return this._fromValue(r._copy(t,e));default:return this._fromValue(r._copy(this._toValue(t),e))}},vr.prototype._update=function(t,e,r){var n=this._resolve(e,r);n&&(t._read=function(t){return n(e._read(t))})},vr.prototype.compare=function(t,e){var r=this._toValue(t),n=this._toValue(e);return this.underlyingType.compare(r,n)},vr.prototype.random=function(){return this._fromValue(this.underlyingType.random())},vr.prototype._deref=function(t,e){var r=this.underlyingType,n=void 0!==r.name&&e.derefed[r.name];return t=r._attrs(e),!n&&e.exportAttrs&&("string"==typeof t&&(t={type:t}),t.logicalType=this._logicalTypeName,this._export(t)),t},vr.prototype._skip=function(t){this.underlyingType._skip(t)},vr.prototype._export=function(){},vr.prototype._fromValue=Ve.abstractFunction,vr.prototype._toValue=Ve.abstractFunction,vr.prototype._resolve=Ve.abstractFunction,Ye.inherits(_r,ir),_r.prototype.typeName="abstract:long",_r.prototype._check=function(t,e,r){var n=this._isValid(t);return!n&&r&&r(t,this),n},_r.prototype._read=function(t){var e,r;if(this._noUnpack?(r=t.pos,t.skipLong(),e=t.buf.slice(r,t.pos)):e=t.unpackLongBytes(t),t.isValid())return this._fromBuffer(e)},_r.prototype._write=function(t,e){this._isValid(e)||Nr(e,this);var r=this._toBuffer(e);this._noUnpack?t.writeFixed(r):t.packLongBytes(r)},_r.prototype._copy=function(t,e){switch(e&&e.coerce){case 3:return this._toJSON(t);case 2:return this._fromJSON(t);default:return this._fromJSON(this._toJSON(t))}},_r.prototype._deref=function(){return"long"},_r.prototype._update=function(t,e){var r=this;switch(e.typeName){case"int":t._read=function(t){return r._fromJSON(e._read(t))};break;case"abstract:long":case"long":t._read=function(t){return r._read(t)}}},_r.prototype.random=function(){return this._fromJSON(ir.prototype.random())},_r.prototype._fromBuffer=Ve.abstractFunction,_r.prototype._toBuffer=Ve.abstractFunction,_r.prototype._fromJSON=Ve.abstractFunction,_r.prototype._toJSON=Ve.abstractFunction,_r.prototype._isValid=Ve.abstractFunction,_r.prototype.compare=Ve.abstractFunction,wr.prototype.defaultValue=function(){},Object.defineProperty(wr.prototype,"order",{enumerable:!0,get:function(){return["descending","ignore","ascending"][this._order+1]}}),wr.prototype.getAliases=function(){return this.aliases},wr.prototype.getDefault=wr.prototype.defaultValue,wr.prototype.getName=function(){return this.name},wr.prototype.getOrder=function(){return this.order},wr.prototype.getType=function(){return this.type},br.prototype._peek=tr.prototype._peek,br.prototype.inspect=function(){return"<Resolver>"};var Pr={Type:tr,getTypeBucket:Ir,getValueBucket:Lr,isPrimitive:Sr,builtins:function(){var t,e,r,n={LogicalType:vr,UnwrappedUnionType:cr,WrappedUnionType:hr},o=Object.keys(Ze);for(t=0,e=o.length;t<e;t++)n[Or(r=o[t])]=Ze[r];return n}()},Cr=Pr;var Fr={Type:Cr.Type,parse:function(t,e){var r;if("string"==typeof t)try{r=JSON.parse(t)}catch(e){r=t}else r=t;return Cr.Type.forSchema(r,e)},types:Cr.builtins,combine:Cr.Type.forTypes,infer:Cr.Type.forValue},Ur=Fr.Type,zr=Fr.combine,Dr=Fr.infer,Vr=Fr.parse,Mr=Fr.types;const Type=Ur,combine=zr,dflt=Fr,infer=Dr,parse=Vr,types=Mr;
